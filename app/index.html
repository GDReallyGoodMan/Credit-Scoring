<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Онлайн заявка на кредит</title>
<style>
body { font-family: Arial, sans-serif; background: #f0f4f8; margin:0; padding:0;}
.container { max-width: 1000px; margin: 30px auto; background:white; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1);}
h1 { text-align:center; margin-bottom:20px; }
form { display: grid; grid-template-columns: 1fr 1fr; gap: 15px;}
label { display:block; font-size:14px; margin-bottom:4px; }
input, select { width: 100%; padding:8px; border-radius:6px; border:1px solid #ccc; }
button { grid-column:1/-1; padding:12px; background:#2563eb; color:white; border:none; border-radius:6px; cursor:pointer; font-size:16px; }
.result { margin-top:15px; padding:12px; border-radius:6px; font-weight:bold; display:none; }
.poor { background:#fee2e2; color:#b91c1c; }
.standard { background:#fef3c7; color:#b45309; }
.high { background:#dcfce7; color:#15803d; }
@media(max-width:800px){ form {grid-template-columns:1fr;} }
</style>
</head>
<body>
<div class="container">
<h1>Онлайн заявка на кредит</h1>
<form id="loanForm">

<label>Month</label><input name="Month" type="number" min="1" max="12" required>
<label>Name</label><input name="Name" type="text">
<label>Age</label><input name="Age" type="number" min="18" max="100" required>
<label>SSN</label><input name="SSN" type="text">
<label>Occupation</label>
<select name="Occupation">
  <option value="">Выберите</option>
  <option>Employed</option>
  <option>Self-employed</option>
  <option>Unemployed</option>
  <option>Student</option>
  <option>Retired</option>
</select>
<label>Annual_Income</label><input name="Annual_Income" type="number" min="0">
<label>Num_Bank_Accounts</label><input name="Num_Bank_Accounts" type="number" min="0">
<label>Num_Credit_Card</label><input name="Num_Credit_Card" type="number" min="0">
<label>Interest_Rate</label><input name="Interest_Rate" type="number" step="0.01" min="0">
<label>Num_of_Loan</label><input name="Num_of_Loan" type="number" min="0">
<label>Type_of_Loan</label>
<select name="Type_of_Loan">
  <option value="">Выберите</option>
  <option>Personal</option>
  <option>Home</option>
  <option>Auto</option>
  <option>Education</option>
</select>
<label>Delay_from_due_date</label><input name="Delay_from_due_date" type="number" min="0">
<label>Num_of_Delayed_Payment</label><input name="Num_of_Delayed_Payment" type="number" min="0">
<label>Changed_Credit_Limit</label><input name="Changed_Credit_Limit" type="number" step="0.01">
<label>Num_Credit_Inquiries</label><input name="Num_Credit_Inquiries" type="number" min="0">
<label>Credit_Mix</label>
<select name="Credit_Mix">
  <option value="">Выберите</option>
  <option>Good</option>
  <option>Standard</option>
  <option>Poor</option>
</select>
<label>Outstanding_Debt</label><input name="Outstanding_Debt" type="number" step="0.01">
<label>Credit_Utilization_Ratio</label><input name="Credit_Utilization_Ratio" type="number" step="0.01" min="0" max="1">
<label>Payment_of_Min_Amount</label>
<select name="Payment_of_Min_Amount">
  <option value="">Выберите</option>
  <option>No</option>
  <option>Yes</option>
</select>
<label>Total_EMI_per_month</label><input name="Total_EMI_per_month" type="number" step="0.01">
<label>Amount_invested_monthly</label><input name="Amount_invested_monthly" type="number" step="0.01">
<label>Payment_Behaviour</label>
<select name="Payment_Behaviour">
  <option value="">Выберите</option>
  <option>Low_spent</option>
  <option>High_spent</option>
</select>
<label>Monthly_Balance</label><input name="Monthly_Balance" type="number" step="0.01">
<label>Credit_History_Years</label><input name="Credit_History_Years" type="number" min="0">
<label>Credit_History_Months</label><input name="Credit_History_Months" type="number" min="0" max="11">

<button type="submit">Отправить заявку</button>
</form>
<div id="result" class="result"></div>
</div>

<script>
const form = document.getElementById('loanForm');
const result = document.getElementById('result');

form.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const data = Object.fromEntries(new FormData(form));
  try{
    const resp = await fetch('http://localhost:8000/predict',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify(data)
    });
    const res = await resp.json();
    result.style.display='block';
    if(res.prediction==='Poor') result.className='result poor';
    else if(res.prediction==='Standard') result.className='result standard';
    else result.className='result high';
    result.textContent=res.message;
  }catch(err){
    result.style.display='block';
    result.className='result poor';
    result.textContent='Ошибка сервера: '+err;
  }
});
</script>
</body>
</html>
